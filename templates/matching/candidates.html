{% extends "base.html" %}
{% block content %}
<h3 class="mb-1">Top Candidates</h3>
<p class="text-muted">Job: <strong>{{ job.title }}</strong> — {{ job.employer.organization_name }}</p>

<table class="table table-hover bg-white shadow-sm">
  <thead>
    <tr>
      <th style="width:90px;">Fit</th>
      <th>Seeker</th>
      <th>Reasons</th>
    </tr>
  </thead>
  <tbody>
    {% for score, fb, seeker in ranked %}
      <tr>
        <td><span class="badge bg-primary fs-6">{{ score|floatformat:0 }}%</span></td>
        <td>{{ seeker.user.first_name|default:seeker.user.username }} ({{ seeker.user.city }})</td>
        <td>
          {% if fb.matched_skills and fb.matched_skills|length > 0 %}
            <div><strong>Matched skills:</strong> {{ fb.matched_skills|join:", " }}</div>
          {% endif %}
          {% if fb.bonuses.salary_alignment %}<div>✓ Salary aligned</div>{% endif %}
          {% if fb.bonuses.work_setup_match %}<div>✓ Work setup match</div>{% endif %}
          {% if fb.bonuses.schedule_match %}<div>✓ Schedule match</div>{% endif %}
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="3" class="text-muted">No seekers yet.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
